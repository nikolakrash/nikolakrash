═══════════════════════════════════════════════════════════════
  МОДУЛЬ: ИСКЛЮЧЕНИЕ БАЗ
═══════════════════════════════════════════════════════════════

📋 НАЗНАЧЕНИЕ
───────────────────────────────────────────────────────────────
Модуль формирует "очищенную" основную базу: из неё удаляются
все пользователи, которые встречаются в базе исключений.

✅ Работает полностью текстово, БЕЗ аккаунтов и Telegram API.
✅ Мгновенная обработка любых объемов данных.

═══════════════════════════════════════════════════════════════
  ФУНКЦИИ И ВОЗМОЖНОСТИ
═══════════════════════════════════════════════════════════════

1. ВВОД ДАННЫХ
───────────────────────────────────────────────────────────────

   📄 Основная база
      • Загрузка файла (.txt или .csv)
      • Вставка списка в текстовое поле
      
   🚫 База исключений
      • Загрузка файла (.txt или .csv)
      • Вставка списка в текстовое поле
      
   Поддерживаемые форматы (для обеих баз):
   - @username
   - https://t.me/username
   - t.me/username
   - username (без символов)
   - ID: 123456789
   - +79001234567 (номер телефона)
   - 7824079731 (чистый ID)
   
   Модуль автоматически:
   • Нормализует все форматы (убирает @, t.me/, приводит к нижнему регистру)
   • Удаляет дубликаты в основной базе
   • Сравнивает элементы независимо от формата

2. ПРОЦЕСС ИСКЛЮЧЕНИЯ
───────────────────────────────────────────────────────────────

   Алгоритм работы:
   1. Нормализация основной базы
      • Удаление дубликатов
      • Приведение всех форматов к единому виду
   
   2. Нормализация базы исключений
      • Приведение всех форматов к единому виду
      • Создание множества для быстрого поиска
   
   3. Сравнение и исключение
      • Для каждого элемента основной базы проверяется,
        есть ли он в базе исключений (после нормализации)
      • Если найден — элемент удаляется
      • Если не найден — элемент остается
   
   4. Форматирование результата
      • Результат форматируется согласно выбранному типу строк
      • Сохраняется порядок элементов из основной базы

3. ФОРМАТ ВЫВОДА
───────────────────────────────────────────────────────────────

   Выберите формат сохраняемых строк в результатах:

   • с @ вначале → @username
   • исключить все символы вначале → username
   • t.me/ → t.me/username
   • https://t.me/ → https://t.me/username
   
   ⚠️ ВАЖНО: ID и номера телефонов всегда сохраняются в исходном
             виде, независимо от выбранного формата.

═══════════════════════════════════════════════════════════════
  ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ
═══════════════════════════════════════════════════════════════

ПРИМЕР 1: Базовое исключение
───────────────────────────────────────────────────────────────
Основная база:
@user1
@user2
@user3
@user4
@user5

База исключений:
@user2
@user4

Результат (формат: с @ вначале):
@user1
@user3
@user5

Удалено: 2 элемента (user2, user4)

ПРИМЕР 2: Разные форматы
───────────────────────────────────────────────────────────────
Основная база:
@Spodlivaeva
https://t.me/korolna
t.me/original_nnn
@woem_woem
7824079731

База исключений:
korolna
@woem_woem
7824079731

Результат (формат: с @ вначале):
@Spodlivaeva
@original_nnn

Удалено: 3 элемента
   • korolna (совпал с https://t.me/korolna)
   • @woem_woem
   • 7824079731

ПРИМЕР 3: Большие базы
───────────────────────────────────────────────────────────────
Основная база: 10,000 элементов
База исключений: 2,000 элементов

Результат: ~8,000 элементов (зависит от пересечений)

✅ Обработка происходит мгновенно, независимо от размера баз.

═══════════════════════════════════════════════════════════════
  ОСОБЕННОСТИ РАБОТЫ
═══════════════════════════════════════════════════════════════

✅ АВТОМАТИЧЕСКАЯ НОРМАЛИЗАЦИЯ
   • Все форматы (@username, t.me/username, https://t.me/username)
     приводятся к единому виду для сравнения
   • Регистр не учитывается (case-insensitive)
   • Символы @, t.me/, https://t.me/ автоматически удаляются

✅ УДАЛЕНИЕ ДУБЛИКАТОВ
   • В основной базе автоматически удаляются дубликаты
   • Каждый элемент встречается в результате только один раз

✅ СОХРАНЕНИЕ ПОРЯДКА
   • Результат сохраняет порядок элементов из основной базы
   • Удаленные элементы просто пропускаются

✅ ОБРАБОТКА ID И ТЕЛЕФОНОВ
   • ID и номера телефонов сохраняются в исходном виде
   • Форматирование применяется только к username

✅ ПРОИЗВОДИТЕЛЬНОСТЬ
   • Работает полностью текстово, без запросов к API
   • Мгновенная обработка любых объемов данных
   • Не требует аккаунтов Telegram

═══════════════════════════════════════════════════════════════
  ПРОЦЕСС РАБОТЫ
═══════════════════════════════════════════════════════════════

1. Загрузите основную базу (файл или вставьте список)
2. Загрузите базу исключений (файл или вставьте список)
3. Выберите формат вывода
4. Нажмите "Очистить базу"

📊 После обработки отображается статистика:
   • В основной базе (количество элементов)
   • В исключениях (количество элементов)
   • Удалено (сколько элементов было исключено)
   • Осталось (сколько элементов осталось в результате)

📥 После завершения доступен:
   • Скачать очищенную базу (TXT файл)

═══════════════════════════════════════════════════════════════
  СТАТИСТИКА
═══════════════════════════════════════════════════════════════

После обработки отображается:

📊 В основной базе
   • Общее количество элементов в основной базе
   • После удаления дубликатов

📊 В исключениях
   • Общее количество элементов в базе исключений

📊 Удалено
   • Количество элементов, которые были найдены в обеих базах
     и исключены из результата

📊 Осталось
   • Количество элементов в очищенной базе
   • Формула: Осталось = В основной базе - Удалено

═══════════════════════════════════════════════════════════════
  РЕЗУЛЬТАТ
═══════════════════════════════════════════════════════════════

📄 TXT файл:
   • Список элементов очищенной базы
   • Формат зависит от выбранного типа строк
   • Готов к использованию для рассылок
   • Сохраняет порядок из основной базы

═══════════════════════════════════════════════════════════════
  ВАЖНЫЕ ЗАМЕЧАНИЯ
═══════════════════════════════════════════════════════════════

✅ ПРЕИМУЩЕСТВА
   • Работает без аккаунтов Telegram
   • Мгновенная обработка
   • Поддержка любых форматов данных
   • Автоматическая нормализация
   • Удаление дубликатов

⚠️ ОГРАНИЧЕНИЯ
   • Сравнение происходит только по текстовому совпадению
   • Не проверяет реальное существование пользователей в Telegram
   • ID и телефоны сравниваются как строки (точное совпадение)

💡 РЕКОМЕНДАЦИИ
   • Используйте для очистки баз от уже обработанных пользователей
   • Подходит для исключения черных списков
   • Можно использовать для удаления дубликатов между базами
   • Идеально для подготовки чистых баз перед рассылками

═══════════════════════════════════════════════════════════════
