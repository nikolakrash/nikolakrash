МОДУЛЬ «ПАРСЕР УЧАСТНИКОВ»
=========================

Этот модуль собирает участников из групп Telegram для дальнейшей работы (рассылки, инвайты и т.п.).
Ниже коротко, что значит каждый блок и какие есть рекомендации.

1. ГРУППА
---------
- **Поле «Группа для парсинга»**  
  Введите `@username` группы или полную ссылку `https://t.me/...`.  
  Рекомендуется парсить открытые / знакомые вам чаты, не злоупотреблять запросами.

2. АККАУНТЫ ДЛЯ ПАРСИНГА
------------------------
- **Список аккаунтов**  
  Выберите один или несколько авторизованных аккаунтов, которые будут парсить участников.
  При нескольких аккаунтах нагрузка распределяется между ними по кругу.
- **Кнопки «Выбрать всех / Снять выбор»**  
  Быстро выделить или снять выделение со всех доступных аккаунтов.

Рекомендация:  
– Для небольших задач (до 2–3 тыс. участников) достаточно 1 аккаунта.  
– Для больших задач подключайте 2–3 аккаунта, но не все сразу, чтобы не ловить лимиты.

3. ОСНОВНЫЕ НАСТРОЙКИ ПАРСИНГА
------------------------------
- **«Лимит участников»**  
  Сколько всего участников нужно собрать.  
  Пример: 200–1000 участников — безопасный старт.

- **«Участников с одного аккаунта за круг» (от / до)**  
  Сколько участников один аккаунт берёт за одну «итерацию» (ОДИН запрос к API).  
  Значение выбирается случайно в этом диапазоне.  
  Пример: от 600 до 1000.

Рекомендация:  
– Не ставьте лимиты сильно выше реальной задачи.  
– Если лимит общий = 200, а «с аккаунта за круг» = 600–1000 — софт сам обрежет до 200.

4. ЗАДЕРЖКИ
-----------
- **«Задержка между аккаунтами (сек)» (от / до)**  
  Пауза между работой разных аккаунтов внутри одного круга.  
  Работает, когда выбрано 2+ аккаунтов.  
  Рекомендуется: 10–30 секунд.

- **«Задержка между кругами (минуты)»**  
  Пауза между циклами, когда все аккаунты один раз отработали.  
  Это главный защитный механизм от лимитов Telegram.  
  Рекомендуется: 5–15 минут.

5. РЕЖИМ «ТОЛЬКО ТЕ, КТО ПИСАЛ СООБЩЕНИЯ»
----------------------------------------
- **Чекбокс «Только те, кто писал сообщения в группе»**  
  В этом режиме парсер сначала анализирует сообщения, собирает авторов, и возвращает только тех, кто реально писал.

При включении появляются дополнительные поля:
- **«Глубина проверки сообщений (общая)»**  
  Сколько последних сообщений смотреть по всему чату (например, 3000).  
- **«Кол-во сообщений с одного аккаунта за круг» (от / до)**  
  Сколько сообщений за один раз проверяет один аккаунт.  
  Софт идёт по сообщениям подряд, без пропусков (акк1 — первые сообщения диапазона, акк2 — следующие и т.д.).

Рекомендация:  
– Используйте этот режим, если нужны более «живые» пользователи, которые что‑то писали в чате.  
– Не ставьте слишком большую глубину на маленьких группах, чтобы не тратить лишние запросы.

6. ФИЛЬТРЫ
----------
Все фильтры можно комбинировать. В итоговый список попадают только те, кто подходит под ВСЕ выбранные условия.

- **«Только активные пользователи (были в сети недавно, не старше 7 дней)»**  
  Оставляет только тех, кто был онлайн не позднее 7 дней назад.  
  Убирает статусы «LastWeek» и «LastMonth», а также слишком старые `LastSeenOffline`.

- **«Только с номером телефона (если доступен)»**  
  Оставляет только тех, у кого есть открытый телефон.  
  Телефон будет записан в формате `+7...`.

- **«Парсить участников только с @username»**  
  Оставляет только тех, у кого есть `username`.  
  Работает и в обычном режиме, и в режиме «Только те, кто писал сообщения».

- **«Пропустить ботов»**  
  Убирает все аккаунты, у которых `bot = True`.

Примеры комбинаций:
- Только реальные люди с username:  
  – Включить: `Пропустить ботов` + `Парсить участников только с @username`.  
- Активные лиды для рассылки в ЛС:  
  – Включить: `Только активные` + `Только с номером телефона` (опционально) + `Пропустить ботов`.

7. КАК РАБОТАЕТ ПАРСИНГ (КРАТКО)
-------------------------------
1. Вы выбираете группу, аккаунты, лимиты и фильтры.  
2. Софт по кругу обходит аккаунты и делает **по одному запросу к API на аккаунт за круг**, соблюдая задержки.  
3. Сначала собираются «сырые» участники из Telegram.  
4. Затем к каждому участнику применяются все включённые фильтры.  
5. В UI показываются:
   - **Всего спарсено** — сколько пользователей прошло все фильтры;  
   - **С username** — сколько с `@username`;  
   - **С телефоном** — сколько с номером.
6. Результаты можно сразу выгрузить в **CSV / TXT / JSON**.

РЕКОМЕНДАЦИИ ПО БЕЗОПАСНОСТИ
---------------------------
- Не запускайте парсер слишком часто по одной и той же группе.  
- Держите разумные задержки между кругами (5–15 минут).  
- Не включайте все фильтры сразу без необходимости — это может сильно уменьшить итоговое количество.  
- Всегда сначала протестируйте на маленьком лимите (100–200 участников), прежде чем запускать большие задачи.

