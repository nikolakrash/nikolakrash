ОТЛОЖЕННЫЙ ПОСТИНГ В КАНАЛЫ

1. Назначение модуля
Модуль «Отложенный постинг» позволяет заранее подготовить посты и автоматически публиковать их в нужные каналы/группы по расписанию. Вы один раз настраиваете текст, медиа и время публикации, а софт сам отправляет посты в указанный момент.

2. Основные возможности
- создание сессий для разных аккаунтов (каждая сессия привязана к одному аккаунту);
- публикация сразу в несколько каналов / групп из одной сессии;
- текстовые посты и посты с медиафайлом (фото/видео/документ);
- отложенная дата и время публикации для каждого поста;
- опциональная уникализация и стилизация текста через ChatGPT;
- автоповтор задач планировщиком без необходимости держать вкладку постоянно открытой.

3. Как устроен модуль
- Сессия — это связка: аккаунт + список каналов/групп.
- Внутри сессии вы создаёте один или несколько постов, каждому задаёте собственное время публикации.
- В фоне работает планировщик, который постоянно проверяет список постов и, когда подходит время, ставит их в очередь на отправку и публикует.

4. Настройка сессии
1) Откройте модуль «Отложенный постинг».
2) В блоке «Новая сессия»:
   - выберите аккаунт, от имени которого будут публиковаться посты;
   - укажите список каналов/групп (каждый с новой строки или через запятую);
   - нажмите «Создать сессию».
3) Новая сессия появится справа в списке. Внутри неё вы сможете добавлять посты.

Важно:
- Аккаунт должен быть авторизован и иметь право писать в эти каналы/группы (быть участником/администратором — в зависимости от типа чата).

5. Создание и настройка поста
Внутри нужной сессии:
1) Нажмите кнопку «Добавить пост» (если она доступна) или используйте уже созданный пост.
2) Заполните:
   - текст поста;
   - при необходимости прикрепите медиафайл;
   - задайте дату и время публикации.
3) При желании включите опции:
   - «Уникализировать» — текст будет пропущен через ChatGPT для изменения формулировок;
   - «Стилизировать» — оформление текста (выделения, стиль и т.п.).
4) Нажмите «Сохранить».

Статусы постов:
- scheduled — запланирован;
- queued — поставлен в очередь на публикацию;
- processing — в процессе отправки;
- completed — успешно опубликован;
- error — ошибка (текст ошибки вы увидите в строке статуса поста).

6. Как работает время и таймзона (очень важно)
Чтобы не было путаницы со временем публикации, нужно понимать, откуда берётся время:

- В интерфейсе вы выбираете дату и время публикации через поле формата «дата + время».
- Браузер воспринимает это время как ЛОКАЛЬНОЕ время вашего компьютера.
- Затем модуль автоматически переводит это локальное время в формат UTC (международное универсальное время) и в таком виде сохраняет на сервере.
- Планировщик на сервере сравнивает текущее время в UTC с сохранённым временем публикации в UTC и решает, когда отправлять пост.

Отсюда важные выводы:
1) Время публикации зависит от настроек даты/времени на вашем компьютере.
   - если на ПК выставлена правильная дата, время и таймзона — пост выйдет ровно тогда, когда вы указали в интерфейсе;
   - если на ПК время отстаёт/спешит или указана неверная таймзона — публикация будет смещена.
2) Геолокация/IP ни на что не влияют.
   - модуль НИЧЕГО не вычисляет по IP;
   - всё основано только на системном времени вашего компьютера и переводе его в UTC.

Рекомендация:
- перед активным использованием модуля проверьте, что на вашем компьютере:
  - правильно выставлена текущая дата;
  - правильно выставлено локальное время;
  - указана корректная таймзона (например, Москва (UTC+3), если вы в этом регионе).

7. Практический пример по времени
Допустим:
- на вашем компьютере выставлена таймзона Москва (UTC+3);
- в модуле вы выбираете время публикации 15:00.

Что произойдёт:
- браузер считает, что 15:00 — это локальное (московское) время;
- модуль переведёт его во внутренний формат UTC (12:00 UTC);
- сервер сравнит своё текущее UTC-время и опубликует пост, когда наступит 12:00 UTC, что у вас соответствует 15:00 по местному времени.

Если же на компьютере выставлена неправильная таймзона, например UTC+1 вместо UTC+3, то пост уйдёт не в то локальное время.

8. Работа планировщика
- Планировщик стартует автоматически при запуске софта.
- Даже если вы закроете вкладку модуля «Отложенный постинг», задачи продолжат выполняться в фоне, пока запущен основной скрипт.
- Состояние постов периодически обновляется, вы можете открыть модуль и увидеть актуальные статусы (scheduled / processing / completed / error).

9. Типичные причины ошибок
- Аккаунт не имеет прав писать в канал/группу.
- Канал/группа больше не существуют или изменён тип доступа.
- Неверно скопирован username/ссылка канала.
- Неправильно выставлены дата/время/таймзона на компьютере (пост «опоздал» или «ушёл раньше»).
- Сработали ограничения Telegram (FloodWait, лимиты отправки сообщений).

10. Рекомендации по использованию
- Перед массовым планированием:
  - протестируйте модуль на 1–2 постах и 1–2 каналах;
  - убедитесь, что время публикации совпадает с ожидаемым;
  - проверьте, что формат поста отображается так, как нужно (текст, медиа).
- Не планируйте слишком плотные публикации подряд с одного аккаунта, чтобы снизить риск FloodWait.
- Для разных тематик/каналов создавайте отдельные сессии, чтобы удобнее управлять постами.

Если вы видите, что пост не вышел в ожидаемое время:
1) Проверьте системное время/таймзону компьютера.
2) Посмотрите статус поста в модуле (completed / error и текст ошибки).
3) Убедитесь, что аккаунт по-прежнему имеет доступ к указанным каналам/группам.

